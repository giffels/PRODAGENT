
# Define a job to test some features of a repacker executable.
# Note that this is in many ways trivial compared to what the
# final repacker executable will need to be.

# This reads a single streamer file as input and then outputs
# 50 files using 50 PoolOutputModules.  Each output module
# selects events based on a bit in the triggerResults object
# in the input file.

# Original author   W. David Dagenhart   29 March 2007

process REPACKER = {

  untracked PSet configurationMetadata = {
        untracked string version = "$Revision: 1.2 $"
        untracked string name = "$Source: /cvs/CMSSW/COMP/PRODAGENT/src/python/RepackerInjector/test/testRepacker_50streams.cfg"
        untracked string annotation = "configuration template for RepackerInjector"
    }

  include "FWCore/MessageLogger/data/MessageLogger.cfi"
  untracked PSet options = 
  {
    untracked vstring Rethrow = { "ProductNotFound", "TooManyProducts", "TooFewProducts" }
  }

  #service = Timing { }

  source = NewEventStreamFileReader
  {
    untracked vstring fileNames = {
      'testRandomFilter.dat'
    }
    int32 max_event_size = 7000000
    int32 max_queue_depth = 5
  }
  
  module out1 = PoolOutputModule
  {
    untracked string fileName = "p1.root"
    untracked int32 compressionLevel = 1
    untracked PSet SelectEvents = {
      vstring SelectEvents = { "p1:HLT" , "p2:HLT" , "p3:HLT" , "p4:HLT" , "p5:HLT" }
    }
    untracked PSet dataset = {
        untracked string dataTier = "RAW"
	untracked string filterName = "stream1"
    }
  }

  module out6 = PoolOutputModule
  {
    untracked string fileName = "p6.root"
    untracked int32 compressionLevel = 1
    untracked PSet SelectEvents = {
      vstring SelectEvents = { "p6:HLT" , "p7:HLT" , "p8:HLT" , "p9:HLT" , "p10:HLT" }
    }
    untracked PSet dataset = {
        untracked string dataTier = "RAW"
	untracked string filterName = "stream6"
    }
  }

  module out11 = PoolOutputModule
  {
    untracked string fileName = "p11.root"
    untracked int32 compressionLevel = 1
    untracked PSet SelectEvents = {
      vstring SelectEvents = { "p11:HLT" , "p12:HLT" , "p13:HLT" , "p14:HLT" , "p15:HLT" }
    }
    untracked PSet dataset = {
        untracked string dataTier = "RAW"
	untracked string filterName = "stream11"
    }
  }

  module out16 = PoolOutputModule
  {
    untracked string fileName = "p16.root"
    untracked int32 compressionLevel = 1
    untracked PSet SelectEvents = {
      vstring SelectEvents = { "p16:HLT" , "p17:HLT" , "p18:HLT" , "p19:HLT" , "p20:HLT" }
    }
    untracked PSet dataset = {
        untracked string dataTier = "RAW"
	untracked string filterName = "stream16"
    }
  }

  module out21 = PoolOutputModule
  {
    untracked string fileName = "p21.root"
    untracked int32 compressionLevel = 1
    untracked PSet SelectEvents = {
      vstring SelectEvents = { "p21:HLT" , "p22:HLT" , "p23:HLT" , "p24:HLT" , "p25:HLT"  }
    }
    untracked PSet dataset = {
        untracked string dataTier = "RAW"
	untracked string filterName = "stream21"
    }
  }

  module out26 = PoolOutputModule
  {
    untracked string fileName = "p26.root"
    untracked int32 compressionLevel = 1
    untracked PSet SelectEvents = {
      vstring SelectEvents = { "p26:HLT" , "p27:HLT" , "p28:HLT" , "p29:HLT" , "p30:HLT" }
    }
    untracked PSet dataset = {
        untracked string dataTier = "RAW"
	untracked string filterName = "stream26"
    }
  }

  module out31 = PoolOutputModule
  {
    untracked string fileName = "p31.root"
    untracked int32 compressionLevel = 1
    untracked PSet SelectEvents = {
      vstring SelectEvents = { "p31:HLT" , "p32:HLT" , "p33:HLT" , "p34:HLT" , "p35:HLT" }
    }
    untracked PSet dataset = {
        untracked string dataTier = "RAW"
	untracked string filterName = "stream31"
    }
  }

  module out36 = PoolOutputModule
  {
    untracked string fileName = "p36.root"
    untracked int32 compressionLevel = 1
    untracked PSet SelectEvents = {
      vstring SelectEvents = { "p36:HLT" , "p37:HLT" , "p38:HLT" , "p39:HLT" , "p40:HLT" }
    }
    untracked PSet dataset = {
        untracked string dataTier = "RAW"
	untracked string filterName = "stream36"
    }
  }

  module out41 = PoolOutputModule
  {
    untracked string fileName = "p41.root"
    untracked int32 compressionLevel = 1
    untracked PSet SelectEvents = {
      vstring SelectEvents = { "p41:HLT" , "p42:HLT" , "p43:HLT" , "p44:HLT" , "p45:HLT" }
    }
    untracked PSet dataset = {
        untracked string dataTier = "RAW"
	untracked string filterName = "stream41"
    }
  }

  module out46 = PoolOutputModule
  {
    untracked string fileName = "p46.root"
    untracked int32 compressionLevel = 1
    untracked PSet SelectEvents = {
      vstring SelectEvents = { "p46:HLT" , "p47:HLT" , "p48:HLT" , "p49:HLT" , "p50:HLT" }
    }
    untracked PSet dataset = {
        untracked string dataTier = "RAW"
	untracked string filterName = "stream46"
    }
  }

  endpath o = { out1 &
                out6 &
                out11 &
                out16 &
                out21 &
                out26 &
                out31 &
                out36 &
                out41 &
                out46
              }
}
